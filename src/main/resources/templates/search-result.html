<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

</head>
<body>
<div class="container">
    <!--    <div class="row header">-->
    <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-primary">
        <a class="navbar-brand" href="#">Trang trủ</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Thể loại <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Sắp xếp</a>
                </li>

            </ul>
            <!--            <form class="form-inline my-2 my-lg-0" method="post" action="/home_page?action=result_search">-->
            <!--                <input class="form-control mr-sm-2" type="text" name="home_search" placeholder="Tìm Kiếm"-->
            <!--                       aria-label="Search">-->
            <!--                <input type="submit" value="tìm kiếm">-->
            <!--            </form>-->
            <div th:if="${account==null}">
                <a href="/login" style="color:black ">Đăng nhập</a>
                <a href="/#" style="color:black ">Đăng ký</a>
                <a href="/#" style="color:black ">quên mật khẩu</a>
            </div>
            <div th:if="${account!=null}">
                <p th:text="${account.name}"></p>
            </div>
            <a href="/#" style="color:black ">quên mật khẩu</a>

        </div>
    </nav>
    <!--    </div>-->
    <!--    //header finished-->

    <!--    phần thân hình ảnh-->
    <div class="row">
        <div class="col-sm-9">
            <div class="row">
                <div class="row">
                    <div class="col-sm-12">
                        <input id="author" placeholder="nhập tên tác giả">
                    </div>
                </div>
                <div class="row">
                    <div class="card-group col-sm-3">
                        <select name="category" id="category">
                            <option value="category 1">thể loại 1</option>
                            <option value="category 2">thể loại 2</option>
                            <option value="category 3">thể loại 3</option>
                            <option value="category 4">thể loại 4</option>
                            <option value="category 5">thể loại 5</option>
                        </select>
                    </div>
                    <div class="card-group col-sm-3">
                        <select name="status" id="status">
                            <option value="updating">đang cập nhập</option>
                            <option value="complete">hoàn thành</option>
                        </select>
                    </div>
                    <!--                    <div class="card-group col-sm-3">-->
                    <!--                        <select name="vote" id="reads">-->

                    <!--                            <option value="vote">đánh giá</option>-->
                    <!--                            <option value="2">lượt like</option>-->

                    <!--                        </select>-->
                    <!--                    </div>-->
                    <div class="card-group col-sm-3">
                        <button onclick="search1()"> Lọc</button>
                    </div>
                </div>

            </div>
            <div class="row" id="showBooks">
                <th:block th:each="b: ${bookList}">
                    <div class="card-group col-sm-4">
                        <div class="card">
                            <div th:if="${account==null}">
                                <a th:href="@{/book/{id}(id=${b.id})}">
                                    <img src="card-img-top" alt="Card image cap" th:src="@{${b.image}}">
                                </a>
                            </div>
                            <div th:if="${account!=null}">
                                <a th:href="@{/user/book/{id}(id=${b.id})}">
                                    <img src="card-img-top" alt="Card image cap" th:src="@{${b.image}}">
                                </a>
                            </div>

                            <div class="card-body">
                                <p th:text="${b.nameBook}"></p>
                            </div>
                        </div>
                    </div>
                </th:block>
            </div>
        </div>


        <div class="col-sm-3" id="sidebar">

            <div class="list-group">
                <button type="button" class="list-group-item list-group-item-action active">
                </button>
                <button type="button" class="list-group-item list-group-item-action">Thể loại truyện
                </button>


            </div>
            <div class="list-group">
                <button type="button" class="list-group-item list-group-item-action active">
                </button>
                <a href="sign_in_form.jsp"> thông tin cá nhân</a><br>
                <a href="sign_in_form.jsp"> tài khoản</a><br>

            </div>
        </div>
    </div>

</div>


<!--footer-->
<div class="row">
    <div class="col-sm-3">
        <ul class="list-group">
            <li class="list-group-item active">Về chúng tôi</li>
            <li class="list-group-item">Giới thiệu chung</li>
            <li class="list-group-item">Làm việc với chúng tôi</li>
            <li class="list-group-item">Hoạt động cộng đồng</li>
            <li class="list-group-item">Đối tác</li>
        </ul>
    </div>
    <div class="col-sm-3">
        <ul class="list-group">
            <li class="list-group-item active">Dịch vụ</li>
            <li class="list-group-item">Tặng quà và gửi quà</li>
            <li class="list-group-item">Chuyển hàng nhanh</li>
            <li class="list-group-item">Tải app trên điện thoại</li>

        </ul>
    </div>
    <div class="col-sm-3">
        <ul class="list-group">
            <li class="list-group-item active">Hỗ trợ khách hàng</li>
            <li class="list-group-item">Câu hỏi thường gặp</li>
            <li class="list-group-item">Khách hàng thân thiết</li>
            <li class="list-group-item">Thông tin giao hàng</li>
            <li class="list-group-item">Phàn nàn-Khiếu nại</li>
            <li class="list-group-item">Hình thức thanh toán</li>
            <li class="list-group-item">Chính sách đổi trả</li>
            <li class="list-group-item">Chính sách bảo mật thông tin</li>
        </ul>
    </div>

    <div class="col-sm-3">
        <ul class="list-group">
            <li class="list-group-item active">Thông tin hữu ích</li>
            <li class="list-group-item">Món ăn ngon</li>
            <li class="list-group-item">Một số cách chế biến</li>
            <li class="list-group-item">Cách rửa rau củ quả sạch khuẩn</li>
            <li class="list-group-item">Cách trang trí món ăn ngon</li>
            <li class="list-group-item">Góc nội trợ</li>
        </ul>
    </div>
</div>
</div>
<script>
    function search1() {

        let author = document.getElementById("author").value;
        let status = document.getElementById("status").value;
        let category = document.getElementById("category").value;
        let book = {
            status: status,
            author: author,
            category: {
                name: category
            }
        };

        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            url: 'http://localhost:8080/user/api/book/search',
            type: 'POST',
            data: JSON.stringify(book),
            success: success,
            error: failed
        });
    }

    function success(response) {
        let showBooks = `<div th:each="b :${response}">
            <p th:text="${b.name}"></p>
        </div>`
        document.getElementById("showBooks").innerHTML=showBooks;
    }

    function failed() {
        alert("failed");
    }

</script>
</body>
</html>